(()=>{function e(){if("IntersectionObserver"in window){let a=new IntersectionObserver((e,n)=>{e.forEach(a=>{if(a.isIntersecting){let e=a.target;a=new Image;a.onload=function(){e.src=e.dataset.src,e.classList.remove("lazy-loading"),e.classList.add("lazy-loaded")},a.onerror=function(){e.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuWbvueJh+WKoOi9veWksei0pTwvdGV4dD48L3N2Zz4=",e.classList.add("lazy-error")},a.src=e.dataset.src,n.unobserve(e)}})},{rootMargin:"50px 0px",threshold:.01});document.querySelectorAll("img[data-src]").forEach(e=>{e.classList.add("lazy-loading"),a.observe(e)})}}function a(){["/images/avatar.png","/images/logo.svg"].forEach(e=>{var a=document.createElement("link");a.rel="preload",a.as="image",a.href=e,document.head.appendChild(a)})}function n(){document.querySelectorAll("img").forEach(e=>{1<window.devicePixelRatio&&(e.style.imageRendering="crisp-edges"),e.addEventListener("error",function(){this.style.display="none",console.warn("图片加载失败:",this.src)})})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){e(),a(),n()}):(e(),a(),n()),document.addEventListener("pjax:complete",function(){e(),n()})})();