<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>{{ config.title }}</title>
  {% if config.subtitle %}<subtitle>{{ config.subtitle }}</subtitle>{% endif %}
    <link href="{{ feed_url | uriencode }}" rel="self"/>
  {% if config.feed.hub %}<link href="{{ config.feed.hub | uriencode }}" rel="hub"/>
{% endif %}
<link href="{{ url | uriencode }}"/>
<updated>{{ posts.first().updated.toISOString() }}</updated>
<id>{{ url | uriencode }}</id>
  {% if config.author %}
<author>
    <name>{{ config.author }}</name>
    {% if config.email %}<email>{{ config.email }}</email>{% endif %}
</author>
  {% endif %}
<generator uri="https://hexo.io/">Hexo</generator>
  {% for post in posts.toArray() %}
<entry>
    <title>{{ post.title }}</title>
    <link href="{{ post.permalink | uriencode }}"/>
    <id>{{ post.permalink | uriencode }}</id>
    <published>{{ post.date.toISOString() }}</published>
    <updated>{{ post.updated.toISOString() }}</updated>
    {% if config.feed.content and post.content %}
    <content type="html"><![CDATA[{{ post.content | noControlChars | safe }}]]></content>
    {% endif %}
    {% if post.description %}
    <summary type="html">{{ post.description }}</summary>
    {% elif post.intro %}
    <summary type="html">{{ post.intro }}</summary>
    {% elif post.excerpt %}
    <summary type="html">{{ post.excerpt }}</summary>
    {% elif post.content %}
      {% set short_content = post.content.substring(0, config.feed.content_limit) %}
      {% if config.feed.content_limit_delim %}
        {% set delimPos = short_content.lastIndexOf(config.feed.content_limit_delim) %}
        {% if delimPos > -1 %}
          {% set short_content = short_content.substring(0, delimPos) %}
        {% endif %}
      {% endif %}
    <summary type="html">{{ short_content | noControlChars | safe }}</summary>
    {% endif %}
    {% for tag in post.tags.toArray() %}
    <category term="{{ tag.name }}" scheme="{{ url + tag.path | uriencode }}"/>
    {% endfor %}
    {% for cat in post.categories.toArray() %}
    <category term="{{ cat.name }}" scheme="{{ url + cat.path | uriencode }}"/>
    {% endfor %}
</entry>
  {% endfor %}
</feed>
